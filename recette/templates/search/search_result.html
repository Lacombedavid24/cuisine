{% extends "recette/_base.html" %}
{% block contenu %}
    <h1>Résultats de recherche pour : "{{ query }}"</h1>
    <div class="search-filter">
        <form method="GET" action="{% url 'recette:search' %}">
            <span>Trier par : </span>
            <select name="orderby" class="">
                <!--<option value="">Titre de la recette</option>
                <option value="">Note moyenne</option>
                <option value="">Difficulté</option>
                <option value="">Temps de préparation</option>-->
                <option value="titre">Titre</option>
                <option value="note">Note moyenne</option>
                <option value="difficulte">Difficulté</option>
                <option value="temps_preparation">Temps de préparations</option>
            </select>
            <select name="orderway" class="">
                <option value="asc">Croissant</option>
                <option value="desc">Décroissant</option>
            </select>
            <input type="hidden" value="{{ query }}" name="search_query"/>
            <input class="btn btn-success" type="submit" value="Filtrer" />
        </form>
    </div>
    {% for result in results.all %}

    {% endfor %}
    <table class="table table-hover search-result">
        <thead>
            <tr>
                <th>Photo</th>
                <th>Titre</th>
                <th>Difficulté</th>
                <th>Note moyenne</th>
                <th>Temps de préparation</th>
            </tr>
        </thead>
        <tbody>
            {% for result in results %}
                <tr>
                    <td>
                    <img src="{% for photo in result.photo_set.all %}{{ photo.image.url }}{% endfor %}" alt="" /></td>
                    <td>{{ result.titre }}</td>
                    <td>{{ result.difficulte }}</td>
                    <td></td>
                    <td>{{ result.temps_preparation }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}